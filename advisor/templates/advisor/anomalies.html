{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Anomalies - CloudPulse AI</title>
  <link rel="stylesheet" href="{% static 'advisor/css/styles.css' %}">
</head>
<body>
  <header class="navbar">
    <div class="logo">CloudPulse AI</div>
    <div class="header-title">Anomalies</div>
    <div class="navbar-controls">
      <a href="{% url 'advisor:dashboard' %}" class="nav-user-button">Dashboard</a>
      <a href="{% url 'advisor:profile' %}" class="neon-button">Profile</a>
    </div>
  </header>

  <main class="dashboard-main">
    <section class="card">
      <h2 style="display:flex; justify-content:space-between; align-items:center;">
        <span><i class="fas fa-exclamation-triangle"></i> All Anomalies</span>
        <span style="font-size:0.9rem; color:#bfc7cf;">Total: {{ anomalies|length }}</span>
      </h2>
      <table>
        <thead><tr><th>Time</th><th>Service</th><th>Description</th><th>Severity</th></tr></thead>
        <tbody>
          {% for a in anomalies %}
            <tr class="{% if a.severity == 'HIGH' %}high-severity{% endif %}">
              <td>{{ a.timestamp }}</td>
              <td class="service-tag">{{ a.service }}</td>
              <td class="description">{{ a.description }}</td>
              <td><span class="severity {{ a.severity|lower }}">{{ a.severity }}</span></td>
            </tr>
          {% empty %}
            <tr><td colspan="4">No anomalies</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </main>
</body>
</html>
